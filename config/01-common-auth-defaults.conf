
###############################################################################
#
# HTCondor-CE common authorization configuration
#
# DO NOT EDIT THIS FILE!  It will be overwritten upon RPM upgrade.
# If you wish to make changes to the HTCondor-CE configuration, create files
# in /etc/condor-ce/config.d containing your changes.
#
###############################################################################

# These should be unnecessary, unless if we have an error below.
DENY_CLIENT = anonymous@*, unmapped@*

# Authentication settings
SEC_DEFAULT_AUTHENTICATION = REQUIRED
SEC_READ_AUTHENTICATION = OPTIONAL
SEC_CLIENT_AUTHENTICATION = OPTIONAL
SEC_CLIENT_AUTHENTICATION_METHODS = FS, SCITOKENS, GSI

# Privacy settings
SEC_DEFAULT_ENCRYPTION = OPTIONAL
SEC_DEFAULT_INTEGRITY = REQUIRED
SEC_READ_INTEGRITY = OPTIONAL
SEC_CLIENT_INTEGRITY = OPTIONAL
SEC_READ_ENCRYPTION = OPTIONAL
SEC_CLIENT_ENCRYPTION = OPTIONAL

# GSI settings
GSI_DAEMON_TRUSTED_CA_DIR=/etc/grid-security/certificates
CERTIFICATE_MAPFILE=/etc/condor-ce/condor_mapfile

# By default, condor_q attempts to authN a user to only show them their jobs
# Since read access is optional, this can cause unexpected authN failures
# N.B. authN negotation here is ultimately decided by the client so this
# configuration only applies to usage of 'condor_ce_q'
CONDOR_Q_ONLY_MY_JOBS = false

# SSL settings
if $(CE.USE_GRID_CERTS)
  AUTH_SSL_SERVER_CERTFILE = /etc/grid-security/hostcert.pem
  AUTH_SSL_SERVER_KEYFILE = /etc/grid-security/hostkey.pem
  AUTH_SSL_SERVER_CADIR = /etc/grid-security/certificates
  AUTH_SSL_CLIENT_CADIR = /etc/grid-security/certificates
  AUTH_SSL_SERVER_CAFILE =
  AUTH_SSL_CLIENT_CAFILE =
else
  AUTH_SSL_SERVER_CAFILE = /etc/pki/tls/certs/ca-bundle.crt
endif
