
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://htcondor.github.io/htcondor-ce-ce/v3/troubleshooting/troubleshooting/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.0">
    
    
      
        <title>Troubleshooting - HTCondor-CE Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.33e2939f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ef6f36e2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../css/superfences.css">
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#htcondor-ce-troubleshooting-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="HTCondor-CE Documentation" class="md-header__button md-logo" aria-label="HTCondor-CE Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HTCondor-CE Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Troubleshooting
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/htcondor/htcondor-ce/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../v5/installation/htcondor-ce/" class="md-tabs__link">
        HTCondor-CE 5
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../v4/installation/htcondor-ce/" class="md-tabs__link">
        HTCondor-CE 4
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../installation/htcondor-ce/" class="md-tabs__link md-tabs__link--active">
        HTCondor-CE 3
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="HTCondor-CE Documentation" class="md-nav__button md-logo" aria-label="HTCondor-CE Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    HTCondor-CE Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/htcondor/htcondor-ce/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        Home
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/" class="md-nav__link">
        Architecture
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        HTCondor-CE 5
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="HTCondor-CE 5" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          HTCondor-CE 5
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v5/installation/htcondor-ce/" class="md-nav__link">
        Installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v5/batch-system-integration/" class="md-nav__link">
        Batch System Integration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v5/verification/" class="md-nav__link">
        Verification
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v5/troubleshooting/troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" type="checkbox" id="__nav_2_5" >
      
      <label class="md-nav__link" for="__nav_2_5">
        Central Grid Operations
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Central Grid Operations" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          Central Grid Operations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v5/remote-job-submission/" class="md-nav__link">
        Submit Jobs Remotely
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v5/troubleshooting/remote-troubleshooting/" class="md-nav__link">
        Remote Troubleshooting
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v5/installation/central-collector/" class="md-nav__link">
        Install a Central Collector
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v5/releases/" class="md-nav__link">
        Releases
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v5/reference/" class="md-nav__link">
        Reference
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        HTCondor-CE 4
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="HTCondor-CE 4" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          HTCondor-CE 4
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v4/installation/htcondor-ce/" class="md-nav__link">
        Installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v4/batch-system-integration/" class="md-nav__link">
        Batch System Integration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v4/verification/" class="md-nav__link">
        Verification
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v4/troubleshooting/troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" >
      
      <label class="md-nav__link" for="__nav_3_5">
        Central Grid Operations
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Central Grid Operations" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Central Grid Operations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v4/remote-job-submission/" class="md-nav__link">
        Submit Jobs Remotely
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v4/troubleshooting/remote-troubleshooting/" class="md-nav__link">
        Remote Troubleshooting
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v4/installation/central-collector/" class="md-nav__link">
        Install a Central Collector
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v4/releases/" class="md-nav__link">
        Releases
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../v4/reference/" class="md-nav__link">
        Reference
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      <label class="md-nav__link" for="__nav_4">
        HTCondor-CE 3
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="HTCondor-CE 3" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          HTCondor-CE 3
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/htcondor-ce/" class="md-nav__link">
        Installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../batch-system-integration/" class="md-nav__link">
        Batch System Integration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../verification/" class="md-nav__link">
        Verification
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Troubleshooting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Troubleshooting
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#known-issues" class="md-nav__link">
    Known Issues
  </a>
  
    <nav class="md-nav" aria-label="Known Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#submit_attrs-are-not-applied-to-jobs-on-the-local-htcondor" class="md-nav__link">
    SUBMIT_ATTRS are not applied to jobs on the local HTCondor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-troubleshooting-items" class="md-nav__link">
    General Troubleshooting Items
  </a>
  
    <nav class="md-nav" aria-label="General Troubleshooting Items">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#making-sure-packages-are-up-to-date" class="md-nav__link">
    Making sure packages are up-to-date
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-package-contents" class="md-nav__link">
    Verify package contents
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-clocks-are-synchronized" class="md-nav__link">
    Verify clocks are synchronized
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-host-cerificates-and-crls-are-valid" class="md-nav__link">
    Verify host cerificates and CRLs are valid
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#htcondor-ce-troubleshooting-items" class="md-nav__link">
    HTCondor-CE Troubleshooting Items
  </a>
  
    <nav class="md-nav" aria-label="HTCondor-CE Troubleshooting Items">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#daemons-fail-to-start" class="md-nav__link">
    Daemons fail to start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jobs-fail-to-submit-to-the-ce" class="md-nav__link">
    Jobs fail to submit to the CE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jobs-stay-idle-on-the-ce" class="md-nav__link">
    Jobs stay idle on the CE
  </a>
  
    <nav class="md-nav" aria-label="Jobs stay idle on the CE">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#idle-jobs-on-ce-make-sure-the-underlying-batch-system-can-run-jobs" class="md-nav__link">
    Idle jobs on CE: Make sure the underlying batch system can run jobs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#idle-jobs-on-ce-is-the-job-router-handling-the-incoming-job" class="md-nav__link">
    Idle jobs on CE: Is the job router handling the incoming job?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#idle-jobs-on-ce-verify-correct-operation-between-the-ce-and-your-local-batch-system" class="md-nav__link">
    Idle jobs on CE: Verify correct operation between the CE and your local batch system
  </a>
  
    <nav class="md-nav" aria-label="Idle jobs on CE: Verify correct operation between the CE and your local batch system">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#for-htcondor-batch-systems" class="md-nav__link">
    For HTCondor batch systems
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-non-htcondor-batch-systems" class="md-nav__link">
    For non-HTCondor batch systems
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#idle-jobs-on-ce-verify-ability-to-change-permissions-on-key-files" class="md-nav__link">
    Idle jobs on CE: Verify ability to change permissions on key files
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jobs-stay-idle-on-a-remote-host-submitting-to-the-ce" class="md-nav__link">
    Jobs stay idle on a remote host submitting to the CE
  </a>
  
    <nav class="md-nav" aria-label="Jobs stay idle on a remote host submitting to the CE">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#remote-idle-jobs-can-you-contact-the-ce" class="md-nav__link">
    Remote idle jobs: Can you contact the CE?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remote-idle-jobs-are-you-authorized-to-run-jobs-on-the-ce" class="md-nav__link">
    Remote idle jobs: Are you authorized to run jobs on the CE?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jobs-go-on-hold" class="md-nav__link">
    Jobs go on hold
  </a>
  
    <nav class="md-nav" aria-label="Jobs go on hold">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#held-jobs-no-matching-routes-route-job-limit-or-route-failure-threshold" class="md-nav__link">
    Held jobs: no matching routes, route job limit, or route failure threshold
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#held-jobs-missingexpired-user-proxy" class="md-nav__link">
    Held jobs: Missing/expired user proxy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#held-jobs-invalid-job-universe" class="md-nav__link">
    Held jobs: Invalid job universe
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identifying-the-corresponding-job-id-on-the-local-batch-system" class="md-nav__link">
    Identifying the corresponding job ID on the local batch system
  </a>
  
    <nav class="md-nav" aria-label="Identifying the corresponding job ID on the local batch system">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#htcondor-batch-systems" class="md-nav__link">
    HTCondor batch systems
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-htcondor-batch-systems" class="md-nav__link">
    Non-HTCondor batch systems
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jobs-removed-from-the-local-htcondor-pool-become-resubmitted-htcondor-batch-systems-only" class="md-nav__link">
    Jobs removed from the local HTCondor pool become resubmitted (HTCondor batch systems only)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#missing-htcondor-tools" class="md-nav__link">
    Missing HTCondor tools
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#htcondor-ce-troubleshooting-tools" class="md-nav__link">
    HTCondor-CE Troubleshooting Tools
  </a>
  
    <nav class="md-nav" aria-label="HTCondor-CE Troubleshooting Tools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#condor_ce_trace" class="md-nav__link">
    condor_ce_trace
  </a>
  
    <nav class="md-nav" aria-label="condor_ce_trace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condor_ce_host_network_check" class="md-nav__link">
    condor_ce_host_network_check
  </a>
  
    <nav class="md-nav" aria-label="condor_ce_host_network_check">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_1" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting_1" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condor_ce_run" class="md-nav__link">
    condor_ce_run
  </a>
  
    <nav class="md-nav" aria-label="condor_ce_run">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_2" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting_2" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condor_ce_submit" class="md-nav__link">
    condor_ce_submit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condor_ce_ping" class="md-nav__link">
    condor_ce_ping
  </a>
  
    <nav class="md-nav" aria-label="condor_ce_ping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_3" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting_3" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condor_ce_q" class="md-nav__link">
    condor_ce_q
  </a>
  
    <nav class="md-nav" aria-label="condor_ce_q">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_4" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting_4" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condor_ce_history" class="md-nav__link">
    condor_ce_history
  </a>
  
    <nav class="md-nav" aria-label="condor_ce_history">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_5" class="md-nav__link">
    Usage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condor_ce_job_router_info" class="md-nav__link">
    condor_ce_job_router_info
  </a>
  
    <nav class="md-nav" aria-label="condor_ce_job_router_info">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_6" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting_5" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condor_ce_router_q" class="md-nav__link">
    condor_ce_router_q
  </a>
  
    <nav class="md-nav" aria-label="condor_ce_router_q">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_7" class="md-nav__link">
    Usage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condor_ce_status" class="md-nav__link">
    condor_ce_status
  </a>
  
    <nav class="md-nav" aria-label="condor_ce_status">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_8" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting_6" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condor_ce_config_val" class="md-nav__link">
    condor_ce_config_val
  </a>
  
    <nav class="md-nav" aria-label="condor_ce_config_val">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_9" class="md-nav__link">
    Usage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condor_ce_reconfig" class="md-nav__link">
    condor_ce_reconfig
  </a>
  
    <nav class="md-nav" aria-label="condor_ce_reconfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_10" class="md-nav__link">
    Usage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condor_ce_onoffrestart" class="md-nav__link">
    condor_ce_{on,off,restart}
  </a>
  
    <nav class="md-nav" aria-label="condor_ce_{on,off,restart}">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_11" class="md-nav__link">
    Usage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#htcondor-ce-troubleshooting-data" class="md-nav__link">
    HTCondor-CE Troubleshooting Data
  </a>
  
    <nav class="md-nav" aria-label="HTCondor-CE Troubleshooting Data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#masterlog" class="md-nav__link">
    MasterLog
  </a>
  
    <nav class="md-nav" aria-label="MasterLog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-to-look-for" class="md-nav__link">
    What to look for:
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schedlog" class="md-nav__link">
    SchedLog
  </a>
  
    <nav class="md-nav" aria-label="SchedLog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-to-look-for_1" class="md-nav__link">
    What to look for
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jobrouterlog" class="md-nav__link">
    JobRouterLog
  </a>
  
    <nav class="md-nav" aria-label="JobRouterLog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#known-errors" class="md-nav__link">
    Known Errors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-to-look-for_2" class="md-nav__link">
    What to look for
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gridmanagerlog" class="md-nav__link">
    GridmanagerLog
  </a>
  
    <nav class="md-nav" aria-label="GridmanagerLog">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-to-look-for_3" class="md-nav__link">
    What to look for
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sharedportlog" class="md-nav__link">
    SharedPortLog
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#messages-log" class="md-nav__link">
    Messages log
  </a>
  
    <nav class="md-nav" aria-label="Messages log">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-to-look-for_4" class="md-nav__link">
    What to look for
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blahp-configuration-file" class="md-nav__link">
    BLAHP Configuration File
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-help" class="md-nav__link">
    Getting Help
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    Reference
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../releases/" class="md-nav__link">
        Releases
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/" class="md-nav__link">
        Reference
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/htcondor/htcondor-ce/edit/master/docs/v3/troubleshooting/troubleshooting.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="htcondor-ce-troubleshooting-guide">HTCondor-CE Troubleshooting Guide<a class="headerlink" href="#htcondor-ce-troubleshooting-guide" title="Permanent link">&para;</a></h1>
<p>In this document, you will find a collection of files and commands to help troubleshoot HTCondor-CE along with a list of
common issues with suggested troubleshooting steps.</p>
<h2 id="known-issues">Known Issues<a class="headerlink" href="#known-issues" title="Permanent link">&para;</a></h2>
<h3 id="submit_attrs-are-not-applied-to-jobs-on-the-local-htcondor">SUBMIT_ATTRS are not applied to jobs on the local HTCondor<a class="headerlink" href="#submit_attrs-are-not-applied-to-jobs-on-the-local-htcondor" title="Permanent link">&para;</a></h3>
<p>If you are adding attributes to jobs submitted to your HTCondor pool with <code>SUBMIT_ATTRS</code>, these will <em>not</em> be applied to
jobs that are entering your pool from the HTCondor-CE. 
To get around this, you will want to add the attributes to your <a href="../../batch-system-integration/">job routes</a>. 
If the CE is the only entry point for jobs into your pool, you can get rid of <code>SUBMIT_ATTRS</code> on your backend. Otherwise,
you will have to maintain your list of attributes both in your list of routes and in your <code>SUBMIT_ATTRS</code>.</p>
<h2 id="general-troubleshooting-items">General Troubleshooting Items<a class="headerlink" href="#general-troubleshooting-items" title="Permanent link">&para;</a></h2>
<h3 id="making-sure-packages-are-up-to-date">Making sure packages are up-to-date<a class="headerlink" href="#making-sure-packages-are-up-to-date" title="Permanent link">&para;</a></h3>
<p>It is important to make sure that the HTCondor-CE and related RPMs are up-to-date.</p>
<div class="highlight"><pre><span></span><code><span class="gp">root@host # </span>yum update <span class="s2">&quot;htcondor-ce*&quot;</span> blahp condor
</code></pre></div>
<p>If you just want to see the packages to update, but do not want to perform the update now, answer <code>N</code> at the prompt.</p>
<h3 id="verify-package-contents">Verify package contents<a class="headerlink" href="#verify-package-contents" title="Permanent link">&para;</a></h3>
<p>If the contents of your HTCondor-CE packages have been changed, the CE may cease to function properly. To verify the
contents of your packages (ignoring changes to configuration files):</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>rpm -q --verify htcondor-ce htcondor-ce-client blahp <span class="p">|</span> grep -v <span class="s1">&#39;/var/&#39;</span> <span class="p">|</span> awk <span class="s1">&#39;$2 != &quot;c&quot; {print $0}&#39;</span>
</code></pre></div>
<p>If the verification command returns output, this means that your packages have been changed. To fix this, you can
reinstall the packages:</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>yum reinstall htcondor-ce htcondor-ce-client blahp
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The reinstall command may place original versions of configuration files alongside the versions that you have modified. If this is the case, the reinstall command will notify you that the original versions will have an <code>.rpmnew</code> suffix. Further inspection of these files may be required as to whether or not you need to merge them into your current configuration.</p>
</div>
<h3 id="verify-clocks-are-synchronized">Verify clocks are synchronized<a class="headerlink" href="#verify-clocks-are-synchronized" title="Permanent link">&para;</a></h3>
<p>Like all GSI-based authentication, HTCondor-CE is sensitive to time skews. Make sure the clock on your CE is
synchronized using a utility such as <code>ntpd</code>. 
Additionally, HTCondor itself is sensitive to time skews on the NFS server.
If you see empty stdout / err being returned to the submitter, verify there is no NFS server time skew.</p>
<h3 id="verify-host-cerificates-and-crls-are-valid">Verify host cerificates and CRLs are valid<a class="headerlink" href="#verify-host-cerificates-and-crls-are-valid" title="Permanent link">&para;</a></h3>
<p>An expired host certificate or CRLs will cause various issues with GSI authentication. 
Verify that your host certificate is valid by running:</p>
<div class="highlight"><pre><span></span><code><span class="gp">root@host # </span>openssl x509 -in /etc/grid-security/hostcert.pem -noout -dates
</code></pre></div>
<p>Likewise, run the <code>fetch-crl</code> script to update your CRLs:</p>
<div class="highlight"><pre><span></span><code><span class="gp">root@host # </span>fetch-crl
</code></pre></div>
<p>If updating CRLs fix your issues, make sure that the <code>fetch-crl-cron</code> and
<code>fetch-crl-boot</code> services are enabled and running.</p>
<h2 id="htcondor-ce-troubleshooting-items">HTCondor-CE Troubleshooting Items<a class="headerlink" href="#htcondor-ce-troubleshooting-items" title="Permanent link">&para;</a></h2>
<p>This section contains common issues you may encounter using HTCondor-CE and next actions to take when you do. 
Before troubleshooting, we recommend increasing the log level:</p>
<ol>
<li>
<p>Write the following into <code>/etc/condor-ce/config.d/99-local.conf</code> to increase the log level for all daemons:</p>
<div class="codehilite"><pre><span></span><code>ALL_DEBUG = D_ALWAYS:2 D_CAT
</code></pre></div>

</li>
<li>
<p>Ensure that the configuration is in place:</p>
<div class="codehilite"><pre><span></span><code>root@host # condor_ce_reconfig
</code></pre></div>

</li>
<li>
<p>Reproduce the issue</p>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before spending any time on troubleshooting, you should ensure that the state of configuration is as expected by running <a href="#condor_ce_reconfig">condor_ce_reconfig</a>.</p>
</div>
<h3 id="daemons-fail-to-start">Daemons fail to start<a class="headerlink" href="#daemons-fail-to-start" title="Permanent link">&para;</a></h3>
<p>If there are errors in your configuration of HTCondor-CE, this may cause some of its required daemons to fail to
startup. 
Check the following subsections in order:</p>
<p><strong>Symptoms</strong></p>
<p>Daemon startup failure may manifest in many ways, the following are few symptoms of the problem.</p>
<ul>
<li>
<p>The service fails to start:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>service condor-ce start
<span class="go">Starting Condor-CE daemons: [ FAIL ]</span>
</code></pre></div>

</li>
<li>
<p><code>condor_ce_q</code> fails with a lengthy error message:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_q
<span class="go">Error:</span>

<span class="go">Extra Info: You probably saw this error because the condor_schedd is not running</span>
<span class="go">on the machine you are trying to query. If the condor_schedd is not running, the</span>
<span class="go">Condor system will not be able to find an address and port to connect to and</span>
<span class="go">satisfy this request. Please make sure the Condor daemons are running and try</span>
<span class="go">again.</span>

<span class="go">Extra Info: If the condor_schedd is running on the machine you are trying to</span>
<span class="go">query and you still see the error, the most likely cause is that you have setup</span>
<span class="go">a personal Condor, you have not defined SCHEDD_NAME in your condor_config file,</span>
<span class="go">and something is wrong with your SCHEDD_ADDRESS_FILE setting. You must define</span>
<span class="go">either or both of those settings in your config file, or you must use the -name</span>
<span class="go">option to condor_q. Please see the Condor manual for details on SCHEDD_NAME and</span>
<span class="go">SCHEDD_ADDRESS_FILE.</span>
</code></pre></div>

</li>
</ul>
<p><strong>Next actions</strong></p>
<ol>
<li><strong>If the MasterLog is filled with <code>ERROR:SECMAN...TCP connection to collector...failed</code>:</strong> This is likely due to a misconfiguration for a host with multiple network interfaces. Verify that you have followed the instructions in <a href="../../installation/htcondor-ce/#configuring-for-multiple-network-interfaces">this</a> section of the install guide.</li>
<li><strong>If the MasterLog is filled with <code>DC_AUTHENTICATE</code> errors:</strong> The HTCondor-CE daemons use the host certificate to authenticate with each other. Verify that your host certificate’s DN matches one of the regular expressions found in <code>/etc/condor-ce/condor_mapfile</code>.</li>
<li><strong>If the SchedLog is filled with <code>Can’t find address for negotiator</code>:</strong> You can ignore this error! The negotiator daemon is used in HTCondor batch systems to match jobs with resources but since HTCondor-CE does not manage any resources directly, it does not run one.</li>
</ol>
<h3 id="jobs-fail-to-submit-to-the-ce">Jobs fail to submit to the CE<a class="headerlink" href="#jobs-fail-to-submit-to-the-ce" title="Permanent link">&para;</a></h3>
<p>If a user is having issues submitting jobs to the CE and you've ruled out general connectivity or firewalls as the
culprit, then you may have encountered an authentication or authorization issue. 
You may see error messages like the following in your <a href="#schedlog">SchedLog</a>:</p>
<div class="highlight"><pre><span></span><code>08/30/16 16:52:56 DC_AUTHENTICATE: required authentication of 72.33.0.189 failed: AUTHENTICATE:1003:Failed to authenticate with any method|AUTHENTICATE:1004:Failed to authenticate using GSI|GSI:5002:Failed to authenticate because the remote (client) side was not able to acquire its credentials.|AUTHENTICATE:1004:Failed to authenticate using FS|FS:1004:Unable to lstat(/tmp/FS_XXXZpUlYa)
08/30/16 16:53:12 PERMISSION DENIED to gsi@unmapped from host 72.33.0.189 for command 60021 (DC_NOP_WRITE), access level WRITE: reason: WRITE authorization policy contains no matching ALLOW entry for this request; identifiers used for this host: 72.33.0.189,dyn-72-33-0-189.uwnet.wisc.edu, hostname size = 1, original ip address = 72.33.0.189
08/30/16 16:53:12 DC_AUTHENTICATE: Command not authorized, done!
</code></pre></div>
<p><strong>Next actions</strong></p>
<ol>
<li><strong>Check voms-mapfile or grid-mapfile</strong> and ensure that the user's DN or VOMS attributes are known to your
    <a href="../../installation/htcondor-ce/#configuring-authentication">authentication method</a>, and that the mapped users exist
    on your CE and cluster.</li>
<li><strong>Check for lcmaps errors</strong> in <code>/var/log/messages</code></li>
<li><strong>If you do not see helpful error messages in <code>/var/log/messages</code>,</strong> adjust the debug level by adding <code>export LCMAPS_DEBUG_LEVEL=5</code> to <code>/etc/sysconfig/condor-ce</code>, restarting the condor-ce service, and checking <code>/var/log/messages</code> for errors again.</li>
</ol>
<h3 id="jobs-stay-idle-on-the-ce">Jobs stay idle on the CE<a class="headerlink" href="#jobs-stay-idle-on-the-ce" title="Permanent link">&para;</a></h3>
<p>Check the following subsections in order, but note that jobs may take several minutes or longer to run if the CE is
busy.</p>
<h4 id="idle-jobs-on-ce-make-sure-the-underlying-batch-system-can-run-jobs">Idle jobs on CE: Make sure the underlying batch system can run jobs<a class="headerlink" href="#idle-jobs-on-ce-make-sure-the-underlying-batch-system-can-run-jobs" title="Permanent link">&para;</a></h4>
<p>HTCondor-CE delegates jobs to your batch system, which is then responsible for matching jobs to worker nodes.
If you cannot manually submit jobs (e.g., <code>condor_submit</code>, <code>qsub</code>) on the CE host to your batch system, then HTCondor-CE
won't be able to either.</p>
<p><strong>Procedure</strong></p>
<ol>
<li>Manually create and submit a simple job (e.g., one that runs <code>sleep</code>)</li>
<li>Check for errors in the submission itself</li>
<li>Watch the job in the batch system queue (e.g., <code>condor_q</code>, <code>qstat</code>)</li>
<li>If the job does not run, check for errors on the batch system</li>
</ol>
<p><strong>Next actions</strong></p>
<p>Consult troubleshooting documentation or support avenues for your batch system.
Once you can run simple manual jobs on your batch system, try submitting to the HTCondor-CE again.</p>
<h4 id="idle-jobs-on-ce-is-the-job-router-handling-the-incoming-job">Idle jobs on CE: Is the job router handling the incoming job?<a class="headerlink" href="#idle-jobs-on-ce-is-the-job-router-handling-the-incoming-job" title="Permanent link">&para;</a></h4>
<p>Jobs on the CE will be put on hold if they do not match any job routes after 30 minutes, but you can check a few things
if you suspect that the jobs are not being matched. 
Check if the JobRouter sees a job before that by looking at the <a href="#jobrouterlog">job router log</a> and looking for the text
<code>src=&lt;JOB-ID&gt;…claimed job</code>.</p>
<p><strong>Next actions</strong></p>
<p>Use <a href="#condor_ce_job_router_info">condor_ce_job_router_info</a> to see why your idle job does not match any routes</p>
<h4 id="idle-jobs-on-ce-verify-correct-operation-between-the-ce-and-your-local-batch-system">Idle jobs on CE: Verify correct operation between the CE and your local batch system<a class="headerlink" href="#idle-jobs-on-ce-verify-correct-operation-between-the-ce-and-your-local-batch-system" title="Permanent link">&para;</a></h4>
<h5 id="for-htcondor-batch-systems">For HTCondor batch systems<a class="headerlink" href="#for-htcondor-batch-systems" title="Permanent link">&para;</a></h5>
<p>HTCondor-CE submits jobs directly to an HTCondor batch system via the JobRouter, so any issues with the CE/local batch
system interaction will appear in the <a href="#jobrouterlog">JobRouterLog</a>.</p>
<p><strong>Next actions</strong></p>
<ol>
<li>Check the <a href="#jobrouterlog">JobRouterLog</a> for failures.</li>
<li>Verify that the local HTCondor is functional.</li>
<li>Use <a href="#condor_ce_config_val">condor_ce_config_val</a> to verify that the <code>JOB_ROUTER_SCHEDD2_NAME</code>, <code>JOB_ROUTER_SCHEDD2_POOL</code>, and <code>JOB_ROUTER_SCHEDD2_SPOOL</code> configuration variables are set to the hostname of your CE, the hostname and port of your local HTCondor’s collector, and the location of your local HTCondor’s spool directory, respectively.</li>
<li>Use <code>condor_config_val QUEUE_SUPER_USER_MAY_IMPERSONATE</code> and verify that it is set to <code>.*</code>.</li>
</ol>
<h5 id="for-non-htcondor-batch-systems">For non-HTCondor batch systems<a class="headerlink" href="#for-non-htcondor-batch-systems" title="Permanent link">&para;</a></h5>
<p>HTCondor-CE submits jobs to a non-HTCondor batch system via the Gridmanager, so any issues with the CE/local batch
system interaction will appear in the <a href="#gridmanagerlog">GridmanagerLog</a>. 
Look for <code>gm state change…</code> lines to figure out where the issures are occuring.</p>
<p><strong>Next actions</strong></p>
<ol>
<li><strong>If you see failures in the GridmanagerLog during job submission:</strong> Save the submit files by adding the appropriate entry to <a href="#blahp-configuration-file">blah.config</a> and submit it <a href="#idle-jobs-on-ce-make-sure-the-underlying-batch-system-can-run-jobs">manually</a> to the batch system. If that succeeds, make sure that the BLAHP knows where your binaries are located by setting the <code>&lt;batch system&gt;_binpath</code> in <code>/etc/blah.config</code>.</li>
<li>
<p><strong>If you see failures in the GridmanagerLog during queries for job status:</strong> Query the resultant job with your batch system tools from the CE. If you can, the BLAHP uses scripts to query for status in <code>/usr/libexec/blahp/&lt;batch system&gt;_status.sh</code> (e.g., <code>/usr/libexec/blahp/lsf_status.sh</code>) that take the argument <code>batch system/YYYMMDD/job ID</code> (e.g., <code>lsf/20141008/65053</code>). Run the appropriate status script for your batch system and upon success, you should see the following output:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>/usr/libexec/blahp/lsf_status.sh lsf/20141008/65053
<span class="go">[ BatchjobId = &quot;894862&quot;; JobStatus = 4; ExitCode = 0; WorkerNode = &quot;atl-prod08&quot; ]</span>
</code></pre></div>

<p>If the script fails, <a href="#getting-help">request help</a> from the OSG.</p>
</li>
</ol>
<h4 id="idle-jobs-on-ce-verify-ability-to-change-permissions-on-key-files">Idle jobs on CE: Verify ability to change permissions on key files<a class="headerlink" href="#idle-jobs-on-ce-verify-ability-to-change-permissions-on-key-files" title="Permanent link">&para;</a></h4>
<p>HTCondor-CE needs the ability to write and chown files in its <code>spool</code> directory and if it cannot, jobs will not run at
all. 
Spool permission errors can appear in the <a href="#schedlog">SchedLog</a> and the <a href="#jobrouterlog">JobRouterLog</a>.</p>
<p><strong>Symptoms</strong></p>
<div class="highlight"><pre><span></span><code>09/17/14 14:45:42 Error: Unable to chown &#39;/var/lib/condor-ce/spool/1/0/cluster1.proc0.subproc0/env&#39; from 12345 to 54321
</code></pre></div>
<p><strong>Next actions</strong></p>
<ul>
<li>As root, try to change ownership of the file or directory in question. If the file does not exist, a parent directory may have improper permissions.</li>
<li>Verify that there aren't any underlying file system issues in the specified location</li>
</ul>
<h3 id="jobs-stay-idle-on-a-remote-host-submitting-to-the-ce">Jobs stay idle on a remote host submitting to the CE<a class="headerlink" href="#jobs-stay-idle-on-a-remote-host-submitting-to-the-ce" title="Permanent link">&para;</a></h3>
<p>If you are submitting your job from a separate submit host to the CE, it stays idle in the queue forever, and you do not
see a resultant job in the CE's queue, this means that your job cannot contact the CE for submission or it is not
authorized to run there. 
Note that jobs may take several minutes or longer if the CE is busy.</p>
<h4 id="remote-idle-jobs-can-you-contact-the-ce">Remote idle jobs: Can you contact the CE?<a class="headerlink" href="#remote-idle-jobs-can-you-contact-the-ce" title="Permanent link">&para;</a></h4>
<p>To check basic connectivity to a CE, use <a href="#condor_ce_ping">condor_ce_ping</a>:</p>
<p><strong>Symptoms</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ping -verbose -name condorce.example.com -pool condorce.example.com:9619 WRITE
<span class="go">ERROR: couldn&#39;t locate condorce.example.com!</span>
</code></pre></div>
<p><strong>Next actions</strong></p>
<ol>
<li>Make sure that the HTCondor-CE daemons are running with <a href="#condor_ce_status">condor_ce_status</a>.</li>
<li>Verify that your CE is reachable from your submit host, replacing <code>condorce.example.com</code> with the hostname of your CE:<div class="codehilite"><pre><span></span><code><span class="gp">user@host $ </span>ping condorce.example.com
</code></pre></div>

</li>
</ol>
<h4 id="remote-idle-jobs-are-you-authorized-to-run-jobs-on-the-ce">Remote idle jobs: Are you authorized to run jobs on the CE?<a class="headerlink" href="#remote-idle-jobs-are-you-authorized-to-run-jobs-on-the-ce" title="Permanent link">&para;</a></h4>
<p>The CE will only run jobs from users that authenticate through the
<a href="../../installation/htcondor-ce/#configuring-authentication">HTCondor-CE configuration</a>.
You can use <a href="#condor_ce_ping">condor_ce_ping</a> to check if you are authorized and what user your proxy is being mapped
to.</p>
<p><strong>Symptoms</strong></p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ping -verbose -name condorce.example.com -pool condorce.example.com:9619 WRITE
<span class="go">Remote Version:              $CondorVersion: 8.0.7 Sep 24 2014 $</span>
<span class="go">Local  Version:              $CondorVersion: 8.0.7 Sep 24 2014 $</span>
<span class="go">Session ID:                  condorce:3343:1412790611:0</span>
<span class="go">Instruction:                 WRITE</span>
<span class="go">Command:                     60021</span>
<span class="go">Encryption:                  none</span>
<span class="go">Integrity:                   MD5</span>
<span class="go">Authenticated using:         GSI</span>
<span class="go">All authentication methods:  GSI</span>
<span class="go">Remote Mapping:              gsi@unmapped</span>
<span class="go">Authorized:                  FALSE</span>
</code></pre></div>
<p>Notice the failures in the above message: <code>Remote Mapping: gsi@unmapped</code> and <code>Authorized: FALSE</code></p>
<p><strong>Next actions</strong></p>
<ol>
<li>Verify that an <a href="../../installation/htcondor-ce/#configuring-authentication">authentication method</a> is set up on the CE</li>
<li>Verify that your user DN is mapped to an existing system user</li>
</ol>
<h3 id="jobs-go-on-hold">Jobs go on hold<a class="headerlink" href="#jobs-go-on-hold" title="Permanent link">&para;</a></h3>
<p>Jobs will be put on held with a <code>HoldReason</code> attribute that can be inspected with <a href="#condor_ce_q">condor_ce_q</a>:</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_q -l &lt;JOB-ID&gt; -attr HoldReason
<span class="go">HoldReason = &quot;CE job in status 5 put on hold by SYSTEM_PERIODIC_HOLD due to no matching routes, route job limit, or route failure threshold.&quot;</span>
</code></pre></div>
<h4 id="held-jobs-no-matching-routes-route-job-limit-or-route-failure-threshold">Held jobs: no matching routes, route job limit, or route failure threshold<a class="headerlink" href="#held-jobs-no-matching-routes-route-job-limit-or-route-failure-threshold" title="Permanent link">&para;</a></h4>
<p>Jobs on the CE will be put on hold if they are not claimed by the job router within 30 minutes.
The most common cases for this behavior are as follows:</p>
<ul>
<li><strong>The job does not match any job routes:</strong>
  use <a href="#condor_ce_job_router_info">condor_ce_job_router_info</a> to see why your idle job does not match any
  <a href="../../batch-system-integration/#how-job-routes-are-constructed">routes</a>.</li>
<li><strong>The route(s) that the job matches to are full:</strong>
  See <a href="../../batch-system-integration/#limiting-the-number-of-jobs">limiting the number of jobs</a>.</li>
<li><strong>The job router is throttling submission to your batch system due to submission failures:</strong>
  See the HTCondor manual for <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/5_4HTCondor_Job.html#55958">FailureRateThreshold</a>.
  Check for errors in the <a href="#jobrouterlog">JobRouterLog</a> or <a href="#gridmanagerlog">GridmanagerLog</a> for HTCondor and
  non-HTCondor batch systems, respectively.</li>
</ul>
<h4 id="held-jobs-missingexpired-user-proxy">Held jobs: Missing/expired user proxy<a class="headerlink" href="#held-jobs-missingexpired-user-proxy" title="Permanent link">&para;</a></h4>
<p>HTCondor-CE requires a valid user proxy for each job that is submitted. 
You can check the status of your proxy with the following</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>voms-proxy-info -all
</code></pre></div>
<p><strong>Next actions</strong></p>
<p>Ensure that the owner of the job generates their proxy with <code>voms-proxy-init</code>.</p>
<h4 id="held-jobs-invalid-job-universe">Held jobs: Invalid job universe<a class="headerlink" href="#held-jobs-invalid-job-universe" title="Permanent link">&para;</a></h4>
<p>The HTCondor-CE only accepts jobs that have <code>universe</code> in their submit files set to <code>vanilla</code>, <code>standard</code>, <code>local</code>, or
<code>scheduler</code>. 
These universes also have corresponding integer values that can be found in the <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/12_Appendix_A.html#104736">HTCondor
manual</a>.</p>
<p><strong>Next actions</strong></p>
<ol>
<li>Ensure jobs submitted locally, from the CE host, are submitted with <code>universe = vanilla</code></li>
<li>
<p>Ensure jobs submitted from a remote submit point are submitted with:</p>
<div class="codehilite"><pre><span></span><code>universe = grid
grid_resource = condor condorce.example.com condorce.example.com:9619
</code></pre></div>

<p>replacing <code>condorce.example.com</code> with the hostname of the CE.</p>
</li>
</ol>
<h3 id="identifying-the-corresponding-job-id-on-the-local-batch-system">Identifying the corresponding job ID on the local batch system<a class="headerlink" href="#identifying-the-corresponding-job-id-on-the-local-batch-system" title="Permanent link">&para;</a></h3>
<p>When troubleshooting interactions between your CE and your local batch system, you will need to associate the CE job ID
and the resultant job ID on the batch system. 
The methods for finding the resultant job ID differs between batch systems.</p>
<h4 id="htcondor-batch-systems">HTCondor batch systems<a class="headerlink" href="#htcondor-batch-systems" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p>To inspect the CE’s job ad, use <a href="#condor_ce_q">condor_ce_q</a> or <a href="#condor_ce_history">condor_ce_history</a>:</p>
<ul>
<li>
<p>Use <code>condor_ce_q</code> if the job is still in the CE’s queue:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_q &lt;JOB-ID&gt; -af RoutedToJobId
</code></pre></div>

</li>
<li>
<p>Use <code>condor_ce_history</code> if the job has left the CE’s queue:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_history &lt;JOB-ID&gt; -af RoutedToJobId
</code></pre></div>

</li>
</ul>
</li>
<li>
<p>Parse the <a href="#jobrouterlog">JobRouterLog</a> for the CE’s job ID.</p>
</li>
</ol>
<h4 id="non-htcondor-batch-systems">Non-HTCondor batch systems<a class="headerlink" href="#non-htcondor-batch-systems" title="Permanent link">&para;</a></h4>
<p>When HTCondor-CE records the corresponding batch system job ID, it is written in the form <code>&lt;BATCH-SYSTEM&gt;/&lt;DATE&gt;/&lt;JOB
ID&gt;</code>:</p>
<div class="highlight"><pre><span></span><code>lsf/20141206/482046
</code></pre></div>
<ol>
<li>
<p>To inspect the CE’s job ad, use <a href="#condor_ce_q">condor_ce_q</a>:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_q &lt;JOB-ID&gt; -af GridJobId
</code></pre></div>

</li>
<li>
<p>Parse the <a href="#gridmanagerlog">GridmanagerLog</a> for the CE’s job ID.</p>
</li>
</ol>
<h3 id="jobs-removed-from-the-local-htcondor-pool-become-resubmitted-htcondor-batch-systems-only">Jobs removed from the local HTCondor pool become resubmitted (HTCondor batch systems only)<a class="headerlink" href="#jobs-removed-from-the-local-htcondor-pool-become-resubmitted-htcondor-batch-systems-only" title="Permanent link">&para;</a></h3>
<p>By design, HTCondor-CE will resubmit jobs that have been removed from the underlying HTCondor pool. 
Therefore, to remove misbehaving jobs, they will need to be removed on the CE level following these steps:</p>
<ol>
<li>Identify the misbehaving job ID in your batch system queue</li>
<li>
<p>Find the job's corresponding CE job ID:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $ </span>condor_q &lt;JOB-ID&gt; -af RoutedFromJobId
</code></pre></div>

</li>
<li>
<p>Use <code>condor_ce_rm</code> to remove the CE job from the queue</p>
</li>
</ol>
<h3 id="missing-htcondor-tools">Missing HTCondor tools<a class="headerlink" href="#missing-htcondor-tools" title="Permanent link">&para;</a></h3>
<p>Most of the HTCondor-CE tools are just wrappers around existing HTCondor tools that load the CE-specific config. 
If you are trying to use HTCondor-CE tools and you see the following error:</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_job_router_info
<span class="go">/usr/bin/condor_ce_job_router_info: line 6: exec: condor_job_router_info: not found</span>
</code></pre></div>
<p>This means that the <code>condor_job_router_info</code> (note this is not the CE version), is not in your <code>PATH</code>.</p>
<p><strong>Next Actions</strong></p>
<ol>
<li>Either the condor RPM is missing or there are some other issues with it (try <code>rpm --verify condor</code>).</li>
<li>You have installed HTCondor in a non-standard location that is not in your <code>PATH</code>.</li>
<li>The <code>condor_job_router_info</code> tool itself wasn't available until Condor-8.2.3-1.1 (available in osg-upcoming).</li>
</ol>
<h2 id="htcondor-ce-troubleshooting-tools">HTCondor-CE Troubleshooting Tools<a class="headerlink" href="#htcondor-ce-troubleshooting-tools" title="Permanent link">&para;</a></h2>
<p>HTCondor-CE has its own separate set of of the HTCondor tools with <strong>ce</strong> in the name (i.e., <code>condor_ce_submit</code> vs
<code>condor_submit</code>). 
Some of the the commands are only for the CE (e.g., <code>condor_ce_run</code> and <code>condor_ce_trace</code>) but many of them are just
HTCondor commands configured to interact with the CE (e.g., <code>condor_ce_q</code>, <code>condor_ce_status</code>). 
It is important to differentiate the two: <code>condor_ce_config_val</code> will provide configuration values for your HTCondor-CE
while
<code>condor_config_val</code> will provide configuration values for your HTCondor batch system. 
If you are not running an HTCondor batch system, the non-CE commands will return errors.</p>
<h3 id="condor_ce_trace">condor_ce_trace<a class="headerlink" href="#condor_ce_trace" title="Permanent link">&para;</a></h3>
<h4 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h4>
<p><code>condor_ce_trace</code> is a useful tool for testing end-to-end job submission. It contacts both the CE’s Schedd and Collector daemons to verify your permission to submit to the CE, displays the submit script that it submits to the CE, and tracks the resultant job.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must have generated a proxy (e.g., <code>voms-proxy-init</code>) and your DN must be added to your <a href="../../installation/htcondor-ce/#configuring-authentication">chosen authentication method</a>.</p>
</div>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_trace condorce.example.com
</code></pre></div>
<p>Replacing the <code>condorce.example.com</code> with the hostname of the CE. 
If you are familiar with the output of condor commands, the command also takes a <code>--debug</code> option that displays verbose
condor output.</p>
<h4 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h4>
<ol>
<li><strong>If the command fails with “Failed ping…”:</strong> Make sure that the HTCondor-CE daemons are running on the CE</li>
<li><strong>If you see “gsi@unmapped” in the “Remote Mapping” line:</strong> Either your credentials are not mapped on the CE or authentication is not set up at all. To set up authentication, refer to our <a href="../../installation/htcondor-ce/#configuring-authentication">installation document</a>.</li>
<li><strong>If the job submits but does not complete:</strong> Look at the status of the job and perform the relevant <a href="#htcondor-ce-troubleshooting-items">troubleshooting steps</a>.</li>
</ol>
<h3 id="condor_ce_host_network_check">condor_ce_host_network_check<a class="headerlink" href="#condor_ce_host_network_check" title="Permanent link">&para;</a></h3>
<h4 id="usage_1">Usage<a class="headerlink" href="#usage_1" title="Permanent link">&para;</a></h4>
<p><code>condor_ce_host_network_check</code> is a tool for testing an HTCondor-CE's networking configuration:</p>
<div class="highlight"><pre><span></span><code><span class="gp">root@host # </span>condor_ce_host_network_check
<span class="go">Starting analysis of host networking for HTCondor-CE</span>
<span class="go">System hostname: fermicloud360.fnal.gov</span>
<span class="go">FQDN matches hostname</span>
<span class="go">Forward resolution of hostname fermicloud360.fnal.gov is 131.225.155.96.</span>
<span class="go">Backward resolution of IPv4 131.225.155.96 is fermicloud360.fnal.gov.</span>
<span class="go">Forward and backward resolution match!</span>
<span class="go">HTCondor is considering all network interfaces and addresses.</span>
<span class="go">HTCondor would pick address of 131.225.155.96 as primary address.</span>
<span class="go">HTCondor primary address 131.225.155.96 matches system preferred address.</span>
<span class="go">Host network configuration should work with HTCondor-CE</span>
</code></pre></div>
<h4 id="troubleshooting_1">Troubleshooting<a class="headerlink" href="#troubleshooting_1" title="Permanent link">&para;</a></h4>
<p>If the tool reports that <code>Host network configuration not expected to work with HTCondor-CE</code>, ensure that forward and
reverse DNS resolution return the public IP and hostname.</p>
<h3 id="condor_ce_run">condor_ce_run<a class="headerlink" href="#condor_ce_run" title="Permanent link">&para;</a></h3>
<h4 id="usage_2">Usage<a class="headerlink" href="#usage_2" title="Permanent link">&para;</a></h4>
<p>Similar to <code>globus-job-run</code>, <code>condor_ce_run</code> is a tool that submits a simple job to your CE, so it is useful for quickly
submitting jobs through your CE. 
To submit a job to the CE and run the <code>env</code> command on the remote batch system:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must have generated a proxy (e.g., <code>voms-proxy-init</code>) and your DN must be added to your <a href="../../installation/htcondor-ce/#configuring-authentication">chosen authentication method</a>.</p>
</div>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_run -r condorce.example.com:9619 /bin/env
</code></pre></div>
<p>Replacing the <code>condorce.example.com</code> with the hostname of the CE. 
If you are troubleshooting an HTCondor-CE that you do not have a login for and the CE accepts local universe jobs, you
can run commands locally on the CE with <code>condor_ce_run</code> with the <code>-l</code> option. 
The following example outputs the JobRouterLog of the CE in question:</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_run -lr condorce.example.com:9619 cat /var/log/condor-ce/JobRouterLog
</code></pre></div>
<p>Replacing the <code>condorce.example.com</code> text with the hostname of the CE. 
To disable this feature on your CE, consult
<a href="../../installation/htcondor-ce/#limiting-or-disabling-locally-running-jobs-on-the-ce">this</a> section of the install documentation.</p>
<h4 id="troubleshooting_2">Troubleshooting<a class="headerlink" href="#troubleshooting_2" title="Permanent link">&para;</a></h4>
<ol>
<li><strong>If you do not see any results:</strong> <code>condor_ce_run</code> does not display results until the job completes on the CE, which may take several minutes or longer if the CE is busy. In the meantime, can use <a href="#condor_ce_q">condor_ce_q</a> in a separate terminal to track the job on the CE. If you never see any results, use <a href="#condor_ce_trace">condor_ce_trace</a> to pinpoint errors.</li>
<li><strong>If you see an error message that begins with “Failed to…”:</strong> Check connectivity to the CE with <a href="#condor_ce_trace">condor_ce_trace</a> or <a href="#condor_ce_ping">condor_ce_ping</a></li>
</ol>
<h3 id="condor_ce_submit">condor_ce_submit<a class="headerlink" href="#condor_ce_submit" title="Permanent link">&para;</a></h3>
<p>See the <a href="https://opensciencegrid.org/docs/compute-element/submit-htcondor-ce/">OSG documentation for submitting to HTCondor-CE</a>
for details.</p>
<h3 id="condor_ce_ping">condor_ce_ping<a class="headerlink" href="#condor_ce_ping" title="Permanent link">&para;</a></h3>
<h4 id="usage_3">Usage<a class="headerlink" href="#usage_3" title="Permanent link">&para;</a></h4>
<p>Use the following <code>condor_ce_ping</code> command to test your ability to submit jobs to an HTCondor-CE, replacing
<code>condorce.example.com</code> with the hostname of your CE:</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_ping -verbose -name condorce.example.com -pool condorce.example.com:9619 WRITE
</code></pre></div>
<p>The following shows successful output where I am able to submit jobs (<code>Authorized: TRUE</code>) as the glow user (<code>Remote
Mapping: glow@users.opensciencegrid.org</code>):</p>
<div class="highlight"><pre><span></span><code><span class="go">Remote Version:              $CondorVersion: 8.0.7 Sep 24 2014 $</span>
<span class="go">Local  Version:              $CondorVersion: 8.0.7 Sep 24 2014 $</span>
<span class="go">Session ID:                  condorce:27407:1412286981:3</span>
<span class="go">Instruction:                 WRITE</span>
<span class="go">Command:                     60021</span>
<span class="go">Encryption:                  none</span>
<span class="go">Integrity:                   MD5</span>
<span class="go">Authenticated using:         GSI</span>
<span class="go">All authentication methods:  GSI</span>
<span class="go">Remote Mapping:              glow@users.opensciencegrid.org</span>
<span class="go">Authorized:                  TRUE</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you run the <code>condor_ce_ping</code> command on the CE that you are testing, omit the <code>-name</code> and <code>-pool</code> options. <code>condor_ce_ping</code> takes the same arguments as <code>condor_ping</code> and is documented in the <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/condor_ping.html">HTCondor manual</a>.</p>
</div>
<h4 id="troubleshooting_3">Troubleshooting<a class="headerlink" href="#troubleshooting_3" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p><strong>If you see “ERROR: couldn’t locate (null)”</strong>, that means the HTCondor-CE schedd (the daemon that schedules jobs) cannot be reached. To track down the issue, increase debugging levels on the CE:</p>
<div class="codehilite"><pre><span></span><code>MASTER_DEBUG = D_ALWAYS:2 D_CAT
SCHEDD_DEBUG = D_ALWAYS:2 D_CAT
</code></pre></div>

<p>Then look in the <a href="#masterlog">MasterLog</a> and <a href="#schedlog">SchedLog</a> for any errors.</p>
</li>
<li>
<p><strong>If you see “gsi@unmapped” in the “Remote Mapping” line</strong>, this means that either your credentials are not mapped on the CE or that authentication is not set up at all. To set up authentication, refer to our <a href="../../installation/htcondor-ce/#configuring-authentication">installation document</a>.</p>
</li>
</ol>
<h3 id="condor_ce_q">condor_ce_q<a class="headerlink" href="#condor_ce_q" title="Permanent link">&para;</a></h3>
<h4 id="usage_4">Usage<a class="headerlink" href="#usage_4" title="Permanent link">&para;</a></h4>
<p><code>condor_ce_q</code> can display job status or specific job attributes for jobs that are still in the CE’s queue. To list jobs that are queued on a CE:</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_q -name condorce.example.com -pool condorce.example.com:9619
</code></pre></div>
<p>To inspect the full ClassAd for a specific job, specify the <code>-l</code> flag and the job ID:</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_q -name condorce.example.com -pool condorce.example.com:9619 -l &lt;JOB-ID&gt;
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you run the <code>condor_ce_q</code> command on the CE that you are testing, omit the <code>-name</code> and <code>-pool</code> options. <code>condor_ce_q</code> takes the same arguments as <code>condor_q</code> and is documented in the <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/condor_q.html">HTCondor manual</a>.</p>
</div>
<h4 id="troubleshooting_4">Troubleshooting<a class="headerlink" href="#troubleshooting_4" title="Permanent link">&para;</a></h4>
<p>If the jobs that you are submiting to a CE are not completing, <code>condor_ce_q</code> can tell you the status of your jobs.</p>
<ol>
<li>
<p><strong>If the schedd is not running:</strong> You will see a lengthy message about being unable to contact the schedd. To track down the issue, increase the debugging levels on the CE with:</p>
<div class="codehilite"><pre><span></span><code>MASTER_DEBUG = D_ALWAYS:2 D_CAT
SCHEDD_DEBUG = D_ALWAYS:2 D_CAT
</code></pre></div>

<p>To apply these changes, reconfigure HTCondor-CE:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>condor_ce_reconfig
</code></pre></div>

<p>Then look in the <a href="#masterlog">MasterLog</a> and <a href="#schedlog">SchedLog</a> on the CE for any errors.</p>
</li>
<li>
<p><strong>If there are issues with contacting the collector:</strong> You will see the following message:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_q -pool ce1.accre.vanderbilt.edu -name ce1.accre.vanderbilt.edu

<span class="go">-- Failed to fetch ads from: &lt;129.59.197.223:9620?sock`33630_8b33_4&gt; : ce1.accre.vanderbilt.edu</span>
</code></pre></div>

<p>This may be due to network issues or bad HTCondor daemon permissions. To fix the latter issue, ensure that the <code>ALLOW_READ</code> configuration value is not set:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_config_val -v ALLOW_READ
<span class="go">Not defined: ALLOW_READ</span>
</code></pre></div>

<p>If it is defined, remove it from the file that is returned in the output.</p>
</li>
<li>
<p><strong>If a job is held:</strong> There should be an accompanying <code>HoldReason</code> that will tell you why it is being held. The <code>HoldReason</code> is in the job’s ClassAd, so you can use the long form of <code>condor_ce_q</code> to extract its value:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_q -name condorce.example.com -pool condorce.example.com:9619 -l &lt;Job ID&gt; <span class="p">|</span> grep HoldReason
</code></pre></div>

</li>
<li>
<p><strong>If a job is idle:</strong> The most common cause is that it is not matching any routes in the CE’s job router. To find out whether this is the case, use the <a href="#condor_ce_job_router_info">condor_ce_job_router_info</a>.</p>
</li>
</ol>
<h3 id="condor_ce_history">condor_ce_history<a class="headerlink" href="#condor_ce_history" title="Permanent link">&para;</a></h3>
<h4 id="usage_5">Usage<a class="headerlink" href="#usage_5" title="Permanent link">&para;</a></h4>
<p><code>condor_ce_history</code> can display job status or specific job attributes for jobs that have that have left the CE’s queue. To list jobs that have run on the CE:</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_history -name condorce.example.com -pool condorce.example.com:9619
</code></pre></div>
<p>To inspect the full ClassAd for a specific job, specify the <code>-l</code> flag and the job ID:</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_history -name condorce.example.com -pool condorce.example.com:9619 -l &lt;Job ID&gt;
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you run the <code>condor_ce_history</code> command on the CE that you are testing, omit the <code>-name</code> and <code>-pool</code> options. <code>condor_ce_history</code> takes the same arguments as <code>condor_history</code> and is documented in the <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/condor_history.html">HTCondor manual</a>.</p>
</div>
<h3 id="condor_ce_job_router_info">condor_ce_job_router_info<a class="headerlink" href="#condor_ce_job_router_info" title="Permanent link">&para;</a></h3>
<h4 id="usage_6">Usage<a class="headerlink" href="#usage_6" title="Permanent link">&para;</a></h4>
<p>Use the <code>condor_ce_job_router_info</code> command to help troubleshoot your routes and how jobs will match to them. 
To see all of your routes (the output is long because it combines your routes with the
<a href="../../batch-system-integration/#job_router_defaults">JOB_ROUTER_DEFAULTS</a> configuration variable):</p>
<div class="highlight"><pre><span></span><code><span class="gp">root@host # </span>condor_ce_job_router_info -config
</code></pre></div>
<p>To see how the job router is handling a job that is currently in the CE’s queue, analyze the output of <code>condor_ce_q</code>
(replace the <code>&lt;JOB-ID&gt;</code> with the job ID that you are interested in):</p>
<div class="highlight"><pre><span></span><code><span class="gp">root@host # </span>condor_ce_q -l &lt;JOB-ID&gt; <span class="p">|</span> condor_ce_job_router_info -match-jobs -ignore-prior-routing -jobads -
</code></pre></div>
<p>To inspect a job that has already left the queue, use <code>condor_ce_history</code> instead of <code>condor_ce_q</code>:</p>
<div class="highlight"><pre><span></span><code><span class="gp">root@host # </span>condor_ce_history -l &lt;JOB-ID&gt; <span class="p">|</span> condor_ce_job_router_info -match-jobs -ignore-prior-routing -jobads -
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the proxy for the job has expired, the job will not match any routes. To work around this constraint:</p>
</div>
<div class="highlight"><pre><span></span><code><span class="gp">root@host # </span>condor_ce_history -l &lt;JOB-ID&gt; <span class="p">|</span> sed <span class="s2">&quot;s/^\(x509UserProxyExpiration\) = .*/\1 = `date +%s --date &#39;+1 sec&#39;`/&quot;</span> <span class="p">|</span> condor_ce_job_router_info -match-jobs -ignore-prior-routing -jobads -
</code></pre></div>
<p>Alternatively, you can provide a file containing a job’s ClassAd as the input and edit attributes within that file:</p>
<div class="highlight"><pre><span></span><code><span class="gp">root@host # </span>condor_ce_job_router_info -match-jobs -ignore-prior-routing -jobads &lt;JOBAD-FILE&gt;
</code></pre></div>
<h4 id="troubleshooting_5">Troubleshooting<a class="headerlink" href="#troubleshooting_5" title="Permanent link">&para;</a></h4>
<ol>
<li><strong>If the job does not match any route:</strong> You can identify this case when you see <code>0 candidate jobs found</code> in the <code>condor_job_router_info</code> output. This message means that, when compared to your job’s ClassAd, the Umbrella constraint does not evaluate to <code>true</code>. When troubleshooting, look at all of the expressions prior to the <code>target.ProcId &gt;= 0</code> expression, because it and everything following it is logic that the job router added so that routed jobs do not get routed again.</li>
<li>
<p><strong>If your job matches more than one route:</strong> the tool will tell you by showing all matching routes after the job ID:</p>
<div class="codehilite"><pre><span></span><code>Checking Job src=162,0 against all routes
Route Matches: Local_PBS
Route Matches: Condor_Test
</code></pre></div>

<p>To troubleshoot why this is occuring, look at the combined Requirements expressions for all routes and compare it to the job’s ClassAd provided. The combined Requirements expression is highlighted below:</p>
<div class="codehilite"><pre><span></span><code>Umbrella constraint: ((target.x509userproxysubject =!= UNDEFINED) &amp;&amp;
(target.x509UserProxyExpiration =!= UNDEFINED) &amp;&amp;
(time() &lt; target.x509UserProxyExpiration) &amp;&amp;
(target.JobUniverse =?= 5 || target.JobUniverse =?= 1)) &amp;&amp;
<span class="hll">( (target.osgTestPBS is true) || (true) ) &amp;&amp;
</span>(target.ProcId &gt;= 0 &amp;&amp; target.JobStatus == 1 &amp;&amp;
(target.StageInStart is undefined || target.StageInFinish isnt undefined) &amp;&amp;
target.Managed isnt &quot;ScheddDone&quot; &amp;&amp;
target.Managed isnt &quot;Extenal&quot; &amp;&amp;
target.Owner isnt Undefined &amp;&amp;
target.RoutedBy isnt &quot;htcondor-ce&quot;)
</code></pre></div>

<p>Both routes evaluate to <code>true</code> for the job’s ClassAd because it contained <code>osgTestPBS = true</code>. Make sure your routes are mutually exclusive, otherwise you may have jobs routed incorrectly! See the <a href="../../batch-system-integration/">job route configuration page</a> for more details.</p>
</li>
<li>
<p><strong>If it is unclear why jobs are matching a route:</strong> wrap the route's requirements expression in <a href="../../batch-system-integration/#debugging-routes">debug()</a> and check the <a href="#jobrouterlog">JobRouterLog</a> for more information.</p>
</li>
</ol>
<h3 id="condor_ce_router_q">condor_ce_router_q<a class="headerlink" href="#condor_ce_router_q" title="Permanent link">&para;</a></h3>
<h4 id="usage_7">Usage<a class="headerlink" href="#usage_7" title="Permanent link">&para;</a></h4>
<p>If you have multiple job routes and many jobs, <code>condor_ce_router_q</code> is a useful tool to see how jobs are being routed
and their statuses:</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_router_q
</code></pre></div>
<p><code>condor_ce_router_q</code> takes the same options as <code>condor_router_q</code> and <code>condor_q</code> and is documented in the <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/condor_router_q.html">HTCondor
manual</a></p>
<h3 id="condor_ce_status">condor_ce_status<a class="headerlink" href="#condor_ce_status" title="Permanent link">&para;</a></h3>
<h4 id="usage_8">Usage<a class="headerlink" href="#usage_8" title="Permanent link">&para;</a></h4>
<p>To see the daemons running on a CE, run the following command:</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_status -any
</code></pre></div>
<p><code>condor_ce_status</code> takes the same arguments as <code>condor_status</code>, which are documented in the
<a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/condor_status.html">HTCondor manual</a>.</p>
<div class="admonition note">
<p class="admonition-title">"Missing" Worker Nodes</p>
<p>An HTCondor-CE will not show any worker nodes (e.g. <code>Machine</code> entries in the <code>condor_ce_status -any</code> output) if
it does not have any running GlideinWMS pilot jobs.
This is expected since HTCondor-CE only forwards incoming grid jobs to your batch system and does not match jobs to
worker nodes.</p>
</div>
<h4 id="troubleshooting_6">Troubleshooting<a class="headerlink" href="#troubleshooting_6" title="Permanent link">&para;</a></h4>
<p>If the output of <code>condor_ce_status -any</code> does not show at least the following daemons:</p>
<ul>
<li>Collector</li>
<li>Scheduler</li>
<li>DaemonMaster</li>
<li>Job_Router</li>
</ul>
<p>Increase the <a href="#htcondor-ce-troubleshooting-items">debug level</a> and consult the
<a href="#htcondor-ce-troubleshooting-data">HTCondor-CE logs</a> for errors.</p>
<h3 id="condor_ce_config_val">condor_ce_config_val<a class="headerlink" href="#condor_ce_config_val" title="Permanent link">&para;</a></h3>
<h4 id="usage_9">Usage<a class="headerlink" href="#usage_9" title="Permanent link">&para;</a></h4>
<p>To see the value of configuration variables and where they are set, use <code>condor_ce_config_val</code>. 
Primarily, This tool is used with the other troubleshooting tools to make sure your configuration is set properly. 
To see the value of a single variable and where it is set:</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_config_val -v &lt;CONFIGURATION-VARIABLE&gt;
</code></pre></div>
<p>To see a list of all configuration variables and their values:</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_config_val -dump
</code></pre></div>
<p>To see a list of all the files that are used to create your configuration and the order that they are parsed, use the
following command:</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_config_val -config
</code></pre></div>
<p><code>condor_ce_config_val</code> takes the same arguments as <code>condor_config_val</code> and is documented in the <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/condor_config_val.html">HTCondor manual</a>.</p>
<h3 id="condor_ce_reconfig">condor_ce_reconfig<a class="headerlink" href="#condor_ce_reconfig" title="Permanent link">&para;</a></h3>
<h4 id="usage_10">Usage<a class="headerlink" href="#usage_10" title="Permanent link">&para;</a></h4>
<p>To ensure that your configuration changes have taken effect, run <code>condor_ce_reconfig</code>.</p>
<div class="highlight"><pre><span></span><code><span class="gp">user@host $ </span>condor_ce_reconfig
</code></pre></div>
<h3 id="condor_ce_onoffrestart">condor_ce_{on,off,restart}<a class="headerlink" href="#condor_ce_onoffrestart" title="Permanent link">&para;</a></h3>
<h4 id="usage_11">Usage<a class="headerlink" href="#usage_11" title="Permanent link">&para;</a></h4>
<p>To turn on/off/restart HTCondor-CE daemons, use the following commands:</p>
<div class="highlight"><pre><span></span><code><span class="gp">root@host # </span>condor_ce_on
<span class="gp">root@host # </span>condor_ce_off
<span class="gp">root@host # </span>condor_ce_restart
</code></pre></div>
<p>The HTCondor-CE service uses the previous commands with default values. 
Using these commands directly gives you more fine-grained control over the behavior of HTCondor-CE's on/off/restart:</p>
<ul>
<li>
<p>If you have installed a new version of HTCondor-CE and want to restart the CE under the new version, run the following command:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>condor_ce_restart -fast
</code></pre></div>

<p>This will cause HTCondor-CE to restart and quickly reconnect to all running jobs.</p>
</li>
<li>
<p>If you need to stop running new jobs, run the following:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>condor_ce_off -peaceful
</code></pre></div>

<p>This will cause HTCondor-CE to accept new jobs without starting them and will wait for currently running jobs to complete before shutting down.</p>
</li>
</ul>
<h2 id="htcondor-ce-troubleshooting-data">HTCondor-CE Troubleshooting Data<a class="headerlink" href="#htcondor-ce-troubleshooting-data" title="Permanent link">&para;</a></h2>
<p>The following files are located on the CE host.</p>
<h3 id="masterlog">MasterLog<a class="headerlink" href="#masterlog" title="Permanent link">&para;</a></h3>
<p>The HTCondor-CE master log tracks status of all of the other HTCondor daemons and thus contains valuable information if
they fail to start.</p>
<ul>
<li>Location: <code>/var/log/condor-ce/MasterLog</code></li>
<li>Key contents: Start-up, shut-down, and communication with other HTCondor daemons</li>
<li>
<p>Increasing the debug level:</p>
<ol>
<li>
<p>Set the following value in <code>/etc/condor-ce/config.d/99-local.conf</code> on the CE host:</p>
<div class="codehilite"><pre><span></span><code>MASTER_DEBUG = D_ALWAYS:2 D_CAT
</code></pre></div>

</li>
<li>
<p>To apply these changes, reconfigure HTCondor-CE:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>condor_ce_reconfig
</code></pre></div>

</li>
</ol>
</li>
</ul>
<h4 id="what-to-look-for">What to look for:<a class="headerlink" href="#what-to-look-for" title="Permanent link">&para;</a></h4>
<p>Successful daemon start-up. 
The following line shows that the Collector daemon started successfully:</p>
<div class="highlight"><pre><span></span><code>10/07/14 14:20:27 Started DaemonCore process &quot;/usr/sbin/condor_collector -f -port 9619&quot;, pid and pgroup = 7318
</code></pre></div>
<h3 id="schedlog">SchedLog<a class="headerlink" href="#schedlog" title="Permanent link">&para;</a></h3>
<p>The HTCondor-CE schedd log contains information on all jobs that are submitted to the CE. 
It contains valuable information when trying to troubleshoot authentication issues.</p>
<ul>
<li>Location: <code>/var/log/condor-ce/SchedLog</code></li>
<li>Key contents:<ul>
<li>Every job submitted to the CE</li>
<li>User authorization events</li>
</ul>
</li>
<li>
<p>Increasing the debug level:</p>
<ol>
<li>
<p>Set the following value in <code>/etc/condor-ce/config.d/99-local.conf</code> on the CE host:</p>
<div class="codehilite"><pre><span></span><code>SCHEDD_DEBUG = D_ALWAYS:2 D_CAT
</code></pre></div>

</li>
<li>
<p>To apply these changes, reconfigure HTCondor-CE:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>condor_ce_reconfig
</code></pre></div>

</li>
</ol>
</li>
</ul>
<h4 id="what-to-look-for_1">What to look for<a class="headerlink" href="#what-to-look-for_1" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Job is submitted to the CE queue:</p>
<div class="codehilite"><pre><span></span><code>10/07/14 16:52:17 Submitting new job 234.0
</code></pre></div>

<p>In this example, the ID of the submitted job is <code>234.0</code>.</p>
</li>
<li>
<p>Job owner is authorized and mapped:</p>
<div class="codehilite"><pre><span></span><code>10/07/14 16:52:17 Command=QMGMT_WRITE_CMD, peer=&lt;131.225.154.68:42262&gt;
10/07/14 16:52:17 AuthMethod=GSI, AuthId=/DC=com/DC=DigiCert-Grid/O=Open Science Grid/OU=People/CN=Brian Lin 1047,
                  /GLOW/Role=NULL/Capability=NULL, &lt;CondorId=glow@users.opensciencegrid.org&gt;
</code></pre></div>

<p>In this example, the job is authorized with the job’s proxy subject using GSI and is mapped to the <code>glow</code> user.</p>
</li>
<li>
<p><a href="#jobs-fail-to-submit-to-the-ce">User job submission fails</a> due to improper authentication or authorization:</p>
<div class="codehilite"><pre><span></span><code>08/30/16 16:52:56 DC_AUTHENTICATE: required authentication of 72.33.0.189
                  failed: AUTHENTICATE:1003:Failed to authenticate with any
                  method|AUTHENTICATE:1004:Failed to authenticate using GSI|GSI:5002:Failed to
                  authenticate because the remote (client) side was not able to acquire its
                  credentials.|AUTHENTICATE:1004:Failed to authenticate using FS|FS:1004:Unable to
                  lstat(/tmp/FS_XXXZpUlYa)
08/30/16 16:53:12 PERMISSION DENIED to &lt;gsi@unmapped&gt;
                  from host 72.33.0.189 for command 60021 (DC_NOP_WRITE), access level WRITE:
                  reason: WRITE authorization policy contains no matching ALLOW entry for this
                  request; identifiers used for this host:
                  72.33.0.189,dyn-72-33-0-189.uwnet.wisc.edu, hostname size = 1, original ip
                  address = 72.33.0.189
08/30/16 16:53:12 DC_AUTHENTICATE: Command not authorized, done
</code></pre></div>

</li>
<li>
<p>Missing negotiator:</p>
<div class="codehilite"><pre><span></span><code>10/18/14 17:32:21 Can&#39;t find address for negotiator
10/18/14 17:32:21 Failed to send RESCHEDULE to unknown daemon:
</code></pre></div>

<p>Since HTCondor-CE does not manage any resources, it does not run a negotiator daemon by default and this error message is expected. In the same vein, you may see messages that there are 0 worker nodes:</p>
<div class="codehilite"><pre><span></span><code>06/23/15 11:15:03 Number of Active Workers 0
</code></pre></div>

</li>
<li>
<p>Corrupted <code>job_queue.log</code>:</p>
<div class="codehilite"><pre><span></span><code>02/07/17 10:55:49 WARNING: Encountered corrupt log record _654 (byte offset 5046225)
02/07/17 10:55:49 103 1354325.0 PeriodicRemove ( StageInFinish &gt; 0 ) 105
02/07/17 10:55:49 Lines following corrupt log record _654 (up to 3):
02/07/17 10:55:49 103 1346101.0 RemoteWallClockTime 116668.000000
02/07/17 10:55:49 104 1346101.0 WallClockCheckpoint
02/07/17 10:55:49 104 1346101.0 ShadowBday
02/07/17 10:55:49 ERROR &quot;Error: corrupt log record _654 (byte offset 5046225) occurred inside closed transaction,
                  recovery failed&quot; at line 1080 in file /builddir/build/BUILD/condor-8.4.8/src/condor_utils/classad_log.cpp
</code></pre></div>

<p>This means <code>/var/lib/condor-ce/spool/job_queue.log</code> has been corrupted and you will need to hand-remove the offending record by searching for the text specified after the <code>Lines following corrupt log record...</code> line. The most common culprit of the corruption is that the disk containing the <code>job_queue.log</code> has filled up. To avoid this problem, you can change the location of <code>job_queue.log</code> by setting <code>JOB_QUEUE_LOG</code> in <code>/etc/condor-ce/config.d/</code> to a path, preferably one on a large SSD.</p>
</li>
</ul>
<h3 id="jobrouterlog">JobRouterLog<a class="headerlink" href="#jobrouterlog" title="Permanent link">&para;</a></h3>
<p>The HTCondor-CE job router log produced by the job router itself and thus contains valuable information when trying to
troubleshoot issues with job routing.</p>
<ul>
<li>Location: <code>/var/log/condor-ce/JobRouterLog</code></li>
<li>Key contents:<ul>
<li>Every attempt to route a job</li>
<li>Routing success messages</li>
<li>Job attribute changes, based on chosen route</li>
<li>Job submission errors to an HTCondor batch system</li>
<li>Corresponding job IDs on an HTCondor batch system</li>
</ul>
</li>
<li>
<p>Increasing the debug level:</p>
<ol>
<li>
<p>Set the following value in <code>/etc/condor-ce/config.d/99-local.conf</code> on the CE host:</p>
<div class="codehilite"><pre><span></span><code>JOB_ROUTER_DEBUG = D_ALWAYS:2 D_CAT
</code></pre></div>

</li>
<li>
<p>Apply these changes, reconfigure HTCondor-CE:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>condor_ce_reconfig
</code></pre></div>

</li>
</ol>
</li>
</ul>
<h4 id="known-errors">Known Errors<a class="headerlink" href="#known-errors" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p><strong>(HTCondor batch systems only)</strong> If you see the following error message:</p>
<div class="codehilite"><pre><span></span><code>Can&#39;t find address of schedd
</code></pre></div>

<p>This means that HTCondor-CE cannot communicate with your HTCondor batch system.
Verify that the <code>condor</code> service is running on the HTCondor-CE host and is configured for your central manager.</p>
</li>
<li>
<p><strong>(HTCondor batch systems only)</strong> If you see the following error message:</p>
<div class="codehilite"><pre><span></span><code>JobRouter failure (src=2810466.0,dest=47968.0,route=MWT2_UCORE): giving up, because submitted job is still not in job queue mirror (submitted 605 seconds ago).  Perhaps it has been removed?
</code></pre></div>

<p>Ensure that <code>condor_config_val SPOOL</code> and <code>condor_ce_config_val JOB_ROUTER_SCHEDD2_SPOOL</code> return the same value.
If they don't, change the value of <code>JOB_ROUTER_SCHEDD2_SPOOL</code> in your HTCondor-CE configuration to match <code>SPOOL</code>
from your HTCondor configuration.</p>
</li>
<li>
<p>If you have <code>D_ALWAYS:2</code> turned on for the job router, you will see errors like the following:</p>
<div class="codehilite"><pre><span></span><code>06/12/15 14:00:28 HOOK_UPDATE_JOB_INFO not configured.
</code></pre></div>

<p>You can safely ignore these.</p>
</li>
</ul>
<h4 id="what-to-look-for_2">What to look for<a class="headerlink" href="#what-to-look-for_2" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Job is considered for routing:</p>
<div class="codehilite"><pre><span></span><code>09/17/14 15:00:56 JobRouter (src=86.0,route=Local_LSF): found candidate job
</code></pre></div>

<p>In parentheses are the original HTCondor-CE job ID (e.g., <code>86.0</code>) and the route (e.g., <code>Local_LSF</code>).</p>
</li>
<li>
<p>Job is successfully routed:</p>
<div class="codehilite"><pre><span></span><code>09/17/14 15:00:57 JobRouter (src=86.0,route=Local_LSF): claimed job
</code></pre></div>

</li>
<li>
<p>Finding the corresponding job ID on your HTCondor batch system:</p>
<div class="codehilite"><pre><span></span><code>09/17/14 15:00:57 JobRouter (src=86.0,dest=205.0,route=Local_Condor): claimed job
</code></pre></div>

<p>In parentheses are the original HTCondor-CE job ID (e.g., <code>86.0</code>) and the resultant job ID on the HTCondor batch system (e.g., <code>205.0</code>)</p>
</li>
<li>
<p>If your job is not routed, there will not be any evidence of it within the log itself. To investigate why your jobs are not being considered for routing, use the <a href="#condor_ce_job_router_info">condor_ce_job_router_info</a></p>
</li>
<li><strong>HTCondor batch systems only</strong>: The following error occurs when the job router daemon cannot submit the routed job:<div class="codehilite"><pre><span></span><code>10/19/14 13:09:15 Can&#39;t resolve collector condorce.example.com; skipping
10/19/14 13:09:15 ERROR (pool condorce.example.com) Can&#39;t find address of schedd
10/19/14 13:09:15 JobRouter failure (src=5.0,route=Local_Condor): failed to submit job
</code></pre></div>

</li>
</ul>
<h3 id="gridmanagerlog">GridmanagerLog<a class="headerlink" href="#gridmanagerlog" title="Permanent link">&para;</a></h3>
<p>The HTCondor-CE grid manager log tracks the submission and status of jobs on non-HTCondor batch systems. 
It contains valuable information when trying to troubleshoot jobs that have been routed but failed to complete. 
Details on how to read the Gridmanager log can be found on the <a href="https://htcondor-wiki.cs.wisc.edu/index.cgi/wiki?p=GridmanagerLog">HTCondor
Wiki</a>.</p>
<ul>
<li>Location: <code>/var/log/condor-ce/GridmanagerLog.&lt;JOB-OWNER&gt;</code></li>
<li>Key contents:<ul>
<li>Every attempt to submit a job to a batch system or other grid resource</li>
<li>Status updates of submitted jobs</li>
<li>Corresponding job IDs on non-HTCondor batch systems</li>
</ul>
</li>
<li>
<p>Increasing the debug level:</p>
<ol>
<li>
<p>Set the following value in <code>/etc/condor-ce/config.d/99-local.conf</code> on the CE host:</p>
<div class="codehilite"><pre><span></span><code>MAX_GRIDMANAGER_LOG = 6h
MAX_NUM_GRIDMANAGER_LOG = 8
GRIDMANAGER_DEBUG = D_ALWAYS:2 D_CAT
</code></pre></div>

</li>
<li>
<p>To apply these changes, reconfigure HTCondor-CE:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>condor_ce_reconfig
</code></pre></div>

</li>
</ol>
</li>
</ul>
<h4 id="what-to-look-for_3">What to look for<a class="headerlink" href="#what-to-look-for_3" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Job is submitted to the batch system:</p>
<div class="codehilite"><pre><span></span><code>09/17/14 09:51:34 [12997] (85.0) gm state change: GM_SUBMIT_SAVE -&gt; GM_SUBMITTED
</code></pre></div>

<p>Every state change the Gridmanager tracks should have the job ID in parentheses (i.e.=(85.0)).</p>
</li>
<li>
<p>Job status being updated:</p>
<div class="codehilite"><pre><span></span><code>09/17/14 15:07:24 [25543] (87.0) gm state change: GM_SUBMITTED -&gt; GM_POLL_ACTIVE
09/17/14 15:07:24 [25543] GAHP[25563] &lt;- &#39;BLAH_JOB_STATUS 3 lsf/20140917/482046&#39;
09/17/14 15:07:24 [25543] GAHP[25563] -&gt; &#39;S&#39;
09/17/14 15:07:25 [25543] GAHP[25563] &lt;- &#39;RESULTS&#39;
09/17/14 15:07:25 [25543] GAHP[25563] -&gt; &#39;R&#39;
09/17/14 15:07:25 [25543] GAHP[25563] -&gt; &#39;S&#39; &#39;1&#39;
09/17/14 15:07:25 [25543] GAHP[25563] -&gt; &#39;3&#39; &#39;0&#39; &#39;No Error&#39; &#39;4&#39; &#39;[ BatchjobId = &quot;482046&quot;; JobStatus = 4; ExitCode = 0; WorkerNode = &quot;atl-prod08&quot; ]&#39;
</code></pre></div>

<p>The first line tells us that the Gridmanager is initiating a status update and the following lines are the results. The most interesting line is the second highlighted section that notes the job ID on the batch system and its status. If there are errors querying the job on the batch system, they will appear here.</p>
</li>
<li>
<p>Finding the corresponding job ID on your non-HTCondor batch system:</p>
<div class="codehilite"><pre><span></span><code>09/17/14 15:07:24 [25543] (87.0) gm state change: GM_SUBMITTED -&gt; GM_POLL_ACTIVE
09/17/14 15:07:24 [25543] GAHP[25563] &lt;- &#39;BLAH_JOB_STATUS 3 lsf/20140917/482046&#39;
</code></pre></div>

<p>On the first line, after the timestamp and PID of the Gridmanager process, you will find the CE’s job ID in parentheses, <code>(87.0)</code>. At the end of the second line, you will find the batch system, date, and batch system job id separated by slashes, <code>lsf/20140917/482046</code>.</p>
</li>
<li>
<p>Job completion on the batch system:</p>
<div class="codehilite"><pre><span></span><code>09/17/14 15:07:25 [25543] (87.0) gm state change: GM_TRANSFER_OUTPUT -&gt; GM_DONE_SAVE
</code></pre></div>

</li>
</ul>
<h3 id="sharedportlog">SharedPortLog<a class="headerlink" href="#sharedportlog" title="Permanent link">&para;</a></h3>
<p>The HTCondor-CE shared port log keeps track of all connections to all of the HTCondor-CE daemons other than the
collector. 
This log is a good place to check if experiencing connectivity issues with HTCondor-CE. More information can be found
<a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/3_9Networking_includes.html#SECTION00492000000000000000">here</a>.</p>
<ul>
<li>Location: <code>/var/log/condor-ce/SharedPortLog</code></li>
<li>Key contents: Every attempt to connect to HTCondor-CE (except collector queries)</li>
<li>
<p>Increasing the debug level:</p>
<ol>
<li>
<p>Set the following value in <code>/etc/condor-ce/config.d/99-local.conf</code> on the CE host:</p>
<div class="codehilite"><pre><span></span><code>SHARED_PORT_DEBUG = D_ALWAYS:2 D_CAT
</code></pre></div>

</li>
<li>
<p>To apply these changes, reconfigure HTCondor-CE:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">root@host # </span>condor_ce_reconfig
</code></pre></div>

</li>
</ol>
</li>
</ul>
<h3 id="messages-log">Messages log<a class="headerlink" href="#messages-log" title="Permanent link">&para;</a></h3>
<p>The messages file can include output from lcmaps, which handles mapping of X.509 proxies to Unix usernames. 
If there are issues with the <a href="../../installation/htcondor-ce/#configuring-authentication">authentication setup</a>, the errors may
appear here.</p>
<ul>
<li>Location: <code>/var/log/messages</code></li>
<li>Key contents: User authentication</li>
</ul>
<h4 id="what-to-look-for_4">What to look for<a class="headerlink" href="#what-to-look-for_4" title="Permanent link">&para;</a></h4>
<p>A user is mapped:</p>
<div class="highlight"><pre><span></span><code>Oct 6 10:35:32 osgserv06 htondor-ce-llgt[12147]: Callout to &quot;LCMAPS&quot; returned local user (service condor): &quot;osgglow01&quot;
</code></pre></div>
<h3 id="blahp-configuration-file">BLAHP Configuration File<a class="headerlink" href="#blahp-configuration-file" title="Permanent link">&para;</a></h3>
<p>HTCondor-CE uses the BLAHP to submit jobs to your local non-HTCondor batch system using your batch system's client
tools.</p>
<ul>
<li>Location: <code>/etc/blah.config</code></li>
<li>Key contents:<ul>
<li>Locations of the batch system's client binaries and logs</li>
<li>Location to save files that are submitted to the local batch system</li>
</ul>
</li>
</ul>
<p>You can also tell the BLAHP to save the files that are being submitted to the local batch system to <code>&lt;DIR-NAME&gt;</code> by
adding the following line:</p>
<div class="highlight"><pre><span></span><code>blah_debug_save_submit_info=&lt;DIR_NAME&gt;
</code></pre></div>
<p>The BLAHP will then create a directory with the format <code>bl_*</code> for each submission to the local jobmanager with the
submit file and proxy used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Whitespace is important so do not put any spaces around the = sign. In addition, the directory must be created and HTCondor-CE should have sufficient permissions to create directories within <code>&lt;DIR_NAME&gt;</code>.</p>
</div>
<h2 id="getting-help">Getting Help<a class="headerlink" href="#getting-help" title="Permanent link">&para;</a></h2>
<p>If you are still experiencing issues after using this document, please let us know!</p>
<ol>
<li>Gather basic HTCondor-CE and related information (versions, relevant configuration, problem description, etc.)</li>
<li>
<p>Gather system information:</p>
<div class="codehilite"><pre><span></span><code>root@host # osg-system-profiler
</code></pre></div>

</li>
<li>
<p>Start a support request using <a href="https://support.opensciencegrid.org/helpdesk/tickets/new">a web interface</a> or by email to <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#104;&#101;&#108;&#112;&#64;&#111;&#112;&#101;&#110;&#115;&#99;&#105;&#101;&#110;&#99;&#101;&#103;&#114;&#105;&#100;&#46;&#111;&#114;&#103;">&#104;&#101;&#108;&#112;&#64;&#111;&#112;&#101;&#110;&#115;&#99;&#105;&#101;&#110;&#99;&#101;&#103;&#114;&#105;&#100;&#46;&#111;&#114;&#103;</a></p>
<ul>
<li>Describe issue and expected or desired behavior</li>
<li>Include basic HTCondor-CE and related information</li>
<li>Attach the osg-system-profiler output</li>
</ul>
</li>
</ol>
<h2 id="reference">Reference<a class="headerlink" href="#reference" title="Permanent link">&para;</a></h2>
<p>Here are some other HTCondor-CE documents that might be helpful:</p>
<ul>
<li><a href="../../installation/htcondor-ce/">Installing HTCondor-CE</a></li>
<li><a href="../../batch-system-integration/">Configuring HTCondor-CE job routes</a></li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../../verification/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Verification
            </div>
          </div>
        </a>
      
      
        <a href="../../releases/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Releases
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "toc.integrate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.d892486b.min.js"></script>
      
    
  </body>
</html>